<template>
<div class="page" data-name="cart">
  <div class="navbar"  style="background: #125e97;">
    <div class="navbar-inner sliding">
      <div class="title" style="color:#fff;">Cart</div>
    </div>
  </div>
  <div class="page-content">
    <div id="cartPage"></div>
    <div class="list media-list" id="lblCartItemSection">
      <ul id="lblCartList"></ul>
    </div>

    <div class="block" style="margin-top: 16px;margin-bottom: 4px;" id="lblCouponSection">
      <div class="list">
        <ul>
          <li class="accordion-item">
            <a href="#" class="item-content item-link">
              <div class="item-inner">
                <div class="item-title">
                  <div class="row no-gap">
                    <div class="col-20">
                      <img src="img/discount.png" >
                    </div>
                    <div class="col-80" style="padding-top: 4.5%;text-overflow: inherit;white-space: normal;">&nbsp; Apply Coupon </div>
                  </div>
                </div>
              </div>
            </a>
            <div class="accordion-item-content">
              <div class="block" style="padding-bottom: 14px;">
                <div class="list media-list">
                  <ul id="lblCouponData"></ul>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <div class="block" style="margin-top: 16px;margin-bottom: 4px;" id="lblDeliverySection">
      <div class="block-title" style="margin:0px;"><strong>Restaurent Bill</strong></div>
      <div class="list">
        <ul>
          <li>
              <div class="item-inner item-cell">
                <div class="item-row">
                  <div class="item-cell" style="text-align: left;">Item Total</div>
                  <div class="item-cell" style="text-align: right;" id="lblTotalWithoutGST">loading...</div>
                </div>
                <div class="item-row">
                  <div class="item-cell" style="text-align: left;">GST</div>
                  <div class="item-cell" style="text-align: right;" id="lblGSTAmount">loading...</div>
                </div>
                <div class="item-row">
                  <div class="item-cell"  style="text-align: left;">Delivery Charge</div>
                  <div class="item-cell" style="text-align: right;" id="lblDeliveryCharge">loading...</div>
                </div>
                <div class="item-row">
                  <div class="item-cell" style=" text-align: left;">Packing Charge</div>
                  <div class="item-cell" style="text-align: right;" id="lblPackingCharge">loading...</div>
                </div>
                <div class="item-row">
                  <div class="item-cell" style="color:green; text-align: left;">Coupon Discount</div>
                  <div class="item-cell"  style="color:green; text-align: right;" id="lblCouponDiscount">0</div>
                </div>
                <div class="item-row">
                  <div class="item-cell" style="text-align: left;"><strong>To Pay</strong></div>
                  <div class="item-cell" style="text-align: right;" id="lblSubTotal"><strong>loading...</strong></div>
                </div>
              </div>
          </li>
        </ul>
      </div>
    </div>

    <div class="block"  id="lblAddressSection">
      <div class="list">
        <ul>
          <li>
            <div class="item-inner item-cell">
              <div class="item-row">
                <div class="item-cell" style="text-align: left;width: 25%;"><img src="img/shipped.png" style="width:110%"></div>
                <div class="item-cell" style="text-align: left;"><strong>Deliver to</strong></div>
                
              </div>
              <div class="item-row">
                <div class="item-cell" id="lblDeliveryAddress">loading... </div><a href="/checkout-address/" class="color-blue">Change</a>
              </div>
              <div class="item-row">
                <div class="item-cell">Expected Delivery Time : <span style="color:#ef3837;">40 Min</span>
                </div>
              </div>
            </div>
          </li>
          <li class="item-content item-input">
            <div class="item-inner">
              <div class="item-input-wrap">
                <a @click="payment" class="button button-fill button-raised color-green">PROCEED TO PAY</a>
                <!-- <a href="/sample-data/" class="button button-fill button-raised color-orange">sample-data</a> -->
              </div>
            </div>
          
          </li>
        </ul>
      </div>
      
    </div>

  </div>
</div>
</template>
<script>
  return{
    methods: {
      payment : function(){
        console.log('here')
        // Get Payment Information Here
        let finalAmount = $('#lblSubTotal').html()
        couponCode = localStorage.getItem('couponCode')
        if(couponCode==null)
          couponCode=false
        
        let routeURL = '/catalog/'+finalAmount+'/'+couponCode+'/'
        cartView.router.navigate(routeURL);
      },
    },
    on:{
      pageBeforeIn : function (e, page) {
        app.currentCartItems();
      }
    }
  }
</script>