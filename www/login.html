<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!--
  Customize this policy to fit your own app's needs. For more guidance, see:
      https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
  Some notes:
      * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
      * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
      * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
          * Enable inline JS: add 'unsafe-inline' to default-src
  -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#2196f3">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <title>Platter Login</title>

    <link rel="stylesheet" href="framework7/css/framework7.min.css">
    <link rel="stylesheet" href="css/icons.css">
    <link rel="stylesheet" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="CSS/jquery.countdownTimer.css" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <style>
        .logoBox {
            position: relative;
            width: 30%;
            /*border: 1px solid rgba(0,0,0,0.1);*/
            -webkit-box-shadow: 0 0 1px rgba(0, 0, 0, 0.5);
            display: block;
            margin: 15px auto -15vw auto;
            background: #fff;
            border-radius: 50px;
            padding: 5px;
            transform: translate3d(0, -60%, 0);
        }

        .logoBox img {
            display: block;
            width: 100%;
            height: auto
        }

        ul {
            padding: 0;
            margin: 0;
            display: block
        }

        ul li {
            display: block;
            padding: 0;
            margin: 0 0 10px 0
        }

        ul li img {
            display: block;
            float: left;
            margin-right: 15px;
            height: 30px
        }
    </style>
</head>

<body class="color-red" style="font-family: 'Montserrat', sans-serif;">
    <div id="app">
        <!-- Status bar overlay for fullscreen mode-->
        <div class="statusbar color-white"></div>


        <!-- Views/Tabs container -->
        <div class="views tabs ios-edges">
            <!-- Tabbar for switching views-tabs -->

            <!-- Your main view/tab, should have "view-main" class. It also has "tab-active" class -->
            <div id="view-home" class="view view-main tab tab-active">
                <!-- Page, data-name contains page name which can be used in page callbacks -->
                <div class="page" data-name="home">
                    <!-- Top Navbar -->

                    <!-- Scrollable page content-->
                    <div class="page-content">
                        <div class="block" style="margin:0px;padding:0px;">
                            <img src="img/login.jpg" style="width: 100%;">
                        </div>

                        <div class="block" style="margin: 50px 0;">
                            <ul>
                                <li>
                                    <img src="img/002-motorcycle.png" alt="">Order from famous street shops to 5 star
                                    restaurants</li>
                                <li>
                                    <img src="img/001-guests.png" alt="">Introducing India's First foodies network. Eat
                                    and chat on the go !</li>
                                <li>
                                    <img src="img/racewin.png" alt="">Order from anywhere, break the limits with
                                    Platter</li>
                            </ul>
                        </div>


                        <div class="block" style="margin: 12px 0;">
                            <div class="row">
                                <div class="col-50">
                                    <!-- <a href="#" class="button button-raised button-fill popup-open" data-login-screen="#my-popup">SIGN UP</a> -->
                                    <a href="#" class="button button-outline login-screen-open" id="btnSignUp"
                                        data-login-screen="#my-register-screen">SIGN UP</a>
                                </div>
                                <div class="col-50">
                                    <a href="#" class="button button-outline login-screen-open" data-login-screen="#my-login-screen">
                                        LOGIN</a>
                                </div>
                            </div>
                        </div>
                        <div class="block" style="margin: 12px 0;">
                            <div class="row">

                                <div class="col-100">
                                    <button class="button button-fill" style="background-color: #46629e;text-transform: none;"
                                        onclick="loginWithFB()" id="fbLink">Login with Facebook </button>
                                </div>
                            </div>
                        </div>
                        <!-- <div class="block" style="margin: 12px 0;">
                            <div class="row">
                                <div class="col-100">
                                    <button class="button button-fill" style="background-color: #d14836;text-transform: none;" id="login" onclick="loginWithGoogle()">Login with Google </button>
                                    <p id="loginstatus"></p>
                                </div>
                            </div>
                        </div> -->

                    </div>
                </div>
            </div>

            <!-- Catalog View -->
            <div id="view-catalog" class="view tab">
                <!-- Catalog page will be loaded here dynamically from /catalog/ route -->
            </div>

            <!-- Settings View -->
            <div id="view-settings" class="view tab">
                <!-- Settings page will be loaded here dynamically from /settings/ route -->
            </div>
        </div>



        <!-- Login Screen -->
        <div class="popup" id="my-login-screen">
            <div class="view">
                <div class="page">
                    <div class="page-content login-screen-content">
                        <div class="block">
                            <a href="#" class="link popup-close icon">
                                <i class="icon material-icons md-only">close</i>
                            </a>
                        </div>
                        <div class="login-screen-title" id="login_title">Login</div>
                        <div class="list" id="loginscrn">
                            <ul>
                                <li class="item-content item-input">
                                    <div class="item-inner">
                                        <div class="item-title item-label">Phone Number</div>
                                        <div class="item-input-wrap">
                                            <input type="number" name="phone" id="phone" placeholder="Enter Your Phone No">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="list" id="loginscrn2">
                            <ul>
                                <li class="item-content item-input">
                                    <div class="item-inner">
                                        <div class="item-input-wrap">
                                            <a href="#" class="col button button-raised button-fill popup-open" id="btnLoginotp"
                                                onclick="return requestOTP()">Send OTP</a>
                                        </div>
                                    </div>

                                </li>
                            </ul>
                        </div>

                        <!-- For OTP-->
                        <div class="view" id="logingotp" style="display: none;">
                            <div class="page">
                                <div class="page-content">
                                    <div class="block-strong" align="center">
                                        <strong style="color:#ef3837;font-size: 20px;">Please enter the OTP to verify
                                            the mobile number</strong>
                                        <!-- <p style="font-size: 14px;">Please enter the OTP to verify the mobile number</a> -->
                                        </p>
                                    </div>
                                    <!-- page-content has additional login-screen content -->
                                    <div class="page-content login-screen-content" style="padding-top:0px;">
                                        <!-- Login form -->
                                        <form>
                                            <div class="list">
                                                <ul>
                                                    <li class="item-content item-input">
                                                        <div class="item-inner">
                                                            <div class="item-title item-label">OTP</div>
                                                            <div class="item-input-wrap">
                                                                <input type="number" id="txtloginOTP" name="otp"
                                                                    placeholder="Enter 4-digit code" required validate
                                                                    pattern="[0-9]*" data-error-message="Only numbers please!">
                                                                <span class="input-clear-button"></span>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="list">
                                                <ul>
                                                    <li class="item-content item-input">
                                                        <div class="item-inner">
                                                            <div class="item-input-wrap">
                                                                <a href="#" class="col button button-raised button-fill popup-open color-red"
                                                                    id="btnLoginverify" data-popup="#" onclick="return verifyloginOTP()">Verify
                                                                    OTP</a>
                                                            </div>
                                                        </div>

                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="block">
                                                <a href="#" class="link icon" onclick="app.resendOTP()">
                                                    <i class="icon material-icons md-only">redo</i>Resend</a>
                                                <div class="right"> Time Remaining
                                                    <span id="ms_timer_login"></span>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- OTP Ends-->

                    </div>
                </div>
            </div>


        </div>
        <div class="popup" id="my-register-screen">
            <div class="view">
                <div class="page">
                    <div class="page-content login-screen-content">
                        <div class="block">
                            <a href="#" class="link popup-close icon">
                                <i class="icon material-icons md-only">close</i>
                            </a>
                        </div>
                        <div class="login-screen-title" id="signtitle">SIGN UP</div>
                        <div class="list" id="signgen">
                            <ul>
                                <li class="item-content item-input">
                                    <div class="item-inner">

                                        <div class="item-input-wrap">
                                            <input type="text" id="name" placeholder="Enter Name">
                                        </div>
                                    </div>
                                </li>
                                <li class="item-content item-input">
                                    <div class="item-inner">

                                        <div class="item-input-wrap">
                                            <input type="email" id="email" placeholder="Enter Email">
                                        </div>
                                    </div>
                                </li>
                                <li class="item-content item-input">
                                    <div class="item-inner">

                                        <div class="item-input-wrap">
                                            <input type="number" id="phone2" placeholder="Enter Your Phone">
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class="list" id="signbtn">
                            <ul>
                                <li class="item-content item-input">
                                    <div class="item-inner">
                                        <div class="item-input-wrap">
                                            <a href="#" class="col button button-raised button-fill" id="btnRegister"
                                                onclick="return register()">Register</a>

                                        </div>
                                    </div>

                                </li>
                            </ul>
                        </div>
                        <!-- For OTP-->
                        <div class="view" id="signotp" style="display: none;">
                            <div class="page">
                                <div class="page-content">
                                    <div class="block-strong" align="center">
                                        <strong style="color:#ef3837;font-size: 20px;">Waiting to automatically detect
                                            a SMS sent to your number</strong>
                                        <p style="font-size: 14px;">Please enter the OTP to verify the mobile number</a>
                                        </p>
                                    </div>
                                    <!-- page-content has additional login-screen content -->
                                    <div class="page-content login-screen-content" style="padding-top:0px;">
                                        <!-- Login form -->
                                        <form>
                                            <div class="list">
                                                <ul>
                                                    <li class="item-content item-input">
                                                        <div class="item-inner">
                                                            <div class="item-title item-label">OTP</div>
                                                            <div class="item-input-wrap">
                                                                <input type="number" id="txtOTP" name="otp" placeholder="Enter 4-digit code"
                                                                    required validate pattern="[0-9]*"
                                                                    data-error-message="Only numbers please!">
                                                                <span class="input-clear-button"></span>
                                                            </div>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="list">
                                                <ul>
                                                    <li class="item-content item-input">
                                                        <div class="item-inner">
                                                            <div class="item-input-wrap">
                                                                <a href="#" class="col button button-raised button-fill popup-open color-red"
                                                                    id="btnLogin" data-popup="#" onclick="return verifyOTP()">Verify
                                                                    OTP</a>
                                                            </div>
                                                        </div>

                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="block">
                                                <a href="#" class="link icon" id="btnResend" onclick="app.resendOTP()">
                                                    <i class="icon material-icons md-only">redo</i>Resend</a>
                                                <div class="right"> Time Remaining
                                                    <span id="ms_timer"></span>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- OTP Ends-->
                    </div>
                </div>
            </div>
        </div>

        <!-- Cordova -->
        <!--
  <script src="cordova.js"></script>
  -->

        <!-- Framework7 library -->
        <script src="framework7/js/framework7.min.js"></script>

        <!-- App routes -->
        <script src="js/routes.js"></script>

        <!-- Your custom app scripts -->
        <script src="js/app.js"></script>
        <script src="cordova.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript" src="js/jquery.countdownTimer.js"></script>
        <script src="js/login.js"></script>
        <script>
            app.initialize();
        </script>
        <script>
            function loginWithFB() {
                // First Logout 
                facebookConnectPlugin.logout( (rplySuccess)=>{
                    console.log(rplySuccess)
                }, (rplyError) => {
                    console.log(rplyError)
                })

                // Login Function
                facebookConnectPlugin.login(['email', 'public_profile'], (resultSuccessLogin)=>{
                    facebookConnectPlugin.api('/' + result.authResponse.userID + '',['email', 'public_profile'],(rply) => {
                        console.log(rply)
                    },(err)=>{
                        console.log(err)
                    })
                }, (resultErrorLogin) => {
                    console.log(resultErrorLogin)
                })
            }
            // function loginWithFB() {
            //     CordovaFacebook.logout();
            //     CordovaFacebook.login({
            //         permissions: ['email', 'public_profile'],
            //         onSuccess: function (result) {
            //             console.log(result);
            //             if (result.declined.length > 0) {
            //                 console.log("The User declined something!");
            //             }
            //             CordovaFacebook.graphRequest({
            //                 path: '/' + result.userID + '',
            //                 params: { access_token: result.accessToken, fields: 'first_name,last_name,email,name' },
            //                 onSuccess: function (datas) {
            //                     console.log(datas);
            //                     app.faceBookLogin();
            //                 },
            //                 onFailure: function (datas) {
            //                     if (datas.error) { alert('error', 'There was an error in graph request:' + datas.errorLocalized); }
            //                 }
            //             });
            //             localStorage.setItem("facebookID", result.userID);
            //             newApp.popup.open('#my-register-screen', true);
            //         },
            //         onFailure: function (result) {
            //             if (result.cancelled) {
            //                 console.log("The user doesn't like my app");
            //             } else if (result.error) {
            //                 console.log("There was an error:" + result.errorLocalized);
            //             }
            //         }
            //     });
            // }
        </script>
</body>

</html>